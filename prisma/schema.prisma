generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Pengguna {
  // Menggunakan gen_random_uuid() sesuai SQL terbaru
  id_pengguna      String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nama_lengkap     String    @db.VarChar(100)
  email            String?   @unique @db.VarChar(150)
  nomor_telepon    String?   @unique @db.VarChar(20)

  // Auth: Password boleh kosong jika login via Google
  kata_sandi       String?   @db.VarChar(255)
  google_id        String?   @unique @db.VarChar(100)

  // Demografi
  kota_asal        String?   @db.VarChar(50)
  tanggal_lahir    DateTime? @db.Date
  jenis_kelamin    gender_enum?
  foto_profil_url  String?

  // Sistem
  peran            peran_enum?       @default(USER)
  status_akun      status_akun_enum? @default(AKTIF)
  wa_terverifikasi Boolean?          @default(false)
  kode_referral    String?           @unique @db.VarChar(20)

  // Log
  login_terakhir   DateTime? @db.Timestamp(6)
  dibuat_pada      DateTime? @default(now()) @db.Timestamp(6)
  diperbarui_pada  DateTime? @default(now()) @updatedAt @db.Timestamp(6)

  @@map("pengguna")
}

// --- ENUM DEFINITIONS (Sesuaikan dengan SQL) ---

enum peran_enum {
  USER
  AGENT
}

enum status_akun_enum {
  AKTIF
  NONAKTIF
  DIBEKUKAN
}

enum gender_enum {
  LAKI_LAKI
  PEREMPUAN
}